---
import { Image } from 'astro:assets';
import Main from './Main.astro';
import type { ImageMetadata } from 'astro';
import { BASE_URL } from '../data/links';
import { get_surrounding_pkgs } from './InvestmentPackage.res.mjs';
import SiblingPackageNav, { NavDir } from '../components/SiblingPackageNav.astro';
import SectionHeader from '../components/SectionHeader.astro';

export enum GalleryType {
  Maternity = "maternity",
  Newborn = "newborn",
  Milestone = "milestone",
  CakeSmashAndBday = "cakesmashandbirthday",
  Family = "family",
  Children = "children",
  Branding = "branding",
  Headshots = "headshots",
}

const galleryTypeToTuple: Record<GalleryType, [string, string]> = {
  [GalleryType.Maternity]: ["Maternity", `${BASE_URL}/gallery/maternity`],
  [GalleryType.Newborn]: ["Newborn", `${BASE_URL}/gallery/newborn`],
  [GalleryType.Milestone]: ["Milestone", `${BASE_URL}/gallery/milestone`],
  [GalleryType.CakeSmashAndBday]: ["Cake Smash & Birthday", `${BASE_URL}/gallery/cakesmashandbirthday`],
  [GalleryType.Family]: ["Family", `${BASE_URL}/gallery/family`],
  [GalleryType.Children]: ["Children", `${BASE_URL}/gallery/children`],
  [GalleryType.Branding]: ["Branding", `${BASE_URL}/gallery/branding`],
  [GalleryType.Headshots]: ["Headshots", `${BASE_URL}/gallery/headshots`],
};

const desktopDisplay = "md:grid grid-cols-[20vw_50vw_20vw] gap-2" 
const mobileDisplay = "flex justify-around items-center"

export interface Props {
  title: string,
  galleryType: GalleryType
  images: ImageMetadata[]
}
const { title, images, galleryType } = Astro.props


let galleries = Object.values(galleryTypeToTuple)
const pkg = galleryTypeToTuple[galleryType];
let pkgs = get_surrounding_pkgs(pkg, galleries)

---
<Main title={`Magnolia Coasts Photography | ${title}`}>
  <div class={`self-center ${desktopDisplay} ${mobileDisplay}`}>
    <SiblingPackageNav text={pkgs[0][0]} href={pkgs[0][1]} direction={NavDir.Left} />
    <SectionHeader title={title} />
    <SiblingPackageNav text={pkgs[1][0]} href={pkgs[1][1]} direction={NavDir.Right} />
  </div>
  <div class="self-center 2xl:max-w-[1530px] lg:max-w-[1200px] grid lg:grid-cols-6 xs:grid-cols-3 grid-cols-1 gap-4 p-4">
    {images.map((image: ImageMetadata, i) => {
      const mod = i % 4
      const isLandscape = mod == 0 || mod == 3
      return (
        <div id={`id-${i}-mod-${mod}`} class={`${isLandscape ? "xs:col-span-2" : "xs:col-span-1"} col-span-1`}>
          <Image
            src={image}
            width={isLandscape ? 730 : 357}
            height={500}
            alt={`Gallery image for ${title}`}
            layout="full-width"
            decoding="async"
            loading="lazy"
          />
        </div>
      )
    })}
  </div>
</Main>
